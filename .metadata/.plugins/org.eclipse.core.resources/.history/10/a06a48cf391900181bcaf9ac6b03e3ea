package net.qhhhq.service.common.impl;

import java.util.Iterator;
import java.util.List;
import java.util.Map;

import org.json.JSONObject;

import net.qhhhq.service.common.HandlerChain;
import net.qhhhq.service.common.MessageHandler;
import net.qhhhq.service.common.SysHead;

public class HandlerChainImpl implements HandlerChain {

	private static final String SYS_HEAD = "SYS_HEAD";

	private Iterator<MessageHandler> iterator;

	public HandlerChainImpl(List<MessageHandler> handlers) {
		this.iterator = handlers.iterator();
	}

	public void doHandler(Map<String, Object> paramMap) {
		if (this.iterator.hasNext()) {
			MessageHandler handler = (MessageHandler) this.iterator.next();
			handler.handle(paramMap, this);
		}
	}

	private SysHead getSysHeader(Map<String, Object> paramMap) {
		Object obj = paramMap.get(SYS_HEAD);
		SysHead sysHead = null;
		if(obj != null) {
			JSONObject sysJson = new JSONObject(obj);
			sysHead = new SysHead();
		}
		return sysHead;
	}

}
